{% extends 'PimProductBundle::layout.html.twig' %}

{% block content %}

    {{ JSFV(form) }}
    <form method="POST" class="form-horizontal" action="{{ form.vars.value.id ? path('pim_ie_export_edit', { 'id': form.vars.value.id }) : path('pim_ie_export_create', { 'connector': connector, 'alias': alias }) }}" {{ form_enctype(form) }}>

        {% set title = form.vars.value.id ? 'Edit export'|trans : 'Create export'|trans %}

        {% set buttons %}
            {{ elements.backLink(path('pim_ie_export_index')) }}
            {% if form.vars.value.id %}
                {{ elements.deleteLink(path('pim_ie_export_remove', { 'id': form.vars.value.id })) }}
            {% endif %}
            {{ elements.submitBtn }}
        {% endset %}

        {{ elements.page_header(title, buttons) }}

        {{ elements.form_errors(form) }}

        {{ elements.accordion({ 'General Properties': form_row(form.code) ~ form_row(form.label) }, 1) }}

        {% for step in form.jobDefinition.steps %}
            {{ elements.accordion({ ('Step'|trans ~ ' ' ~ loop.index): form_widget(step) }, loop.index + 1) }}
        {% endfor %}

        {{ form_rest(form) }}
    </form>
{% endblock %}
