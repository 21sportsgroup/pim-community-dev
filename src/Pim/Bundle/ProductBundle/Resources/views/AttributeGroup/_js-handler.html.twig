<script type="text/javascript">
$(function() {

    var activeTab = $('[href=' + location.hash + ']');
    activeTab && activeTab.tab('show');

    function updateSortOrder() {
        var num = 0;
        $('#entities-sortable').find('li').each(function() {
            $(this).find('.handle input').val(num);
            num++;
        });

        $.ajax({
            url: '{{ path('pim_product_attributegroup_sort') }}',
            type: 'POST',
            data: $('#pim_product_attributegroup_sort').serialize()
        });
    }

    $('#entities-sortable').sortable({
        handle: '.handle',
        containment: 'parent',
        tolerance: 'pointer',
        update: updateSortOrder
    });

    var addBtn = $('<a href="{{ path('pim_product_attributegroup_create') }}">')
        .html($('<i>', { class: 'icon-plus-sign' }));

    $('#group-container').sidebarize({ buttons: [ addBtn ] });
});
</script>