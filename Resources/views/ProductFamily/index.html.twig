{% extends 'PimProductBundle::layout.html.twig' %}

{% set title = 'Family'|trans %}

{% block content %}

    <div class="row-fluid has-resizable-sidebar">
        <div class="resizable-sidebar">
            <ul>
                {% for family in families %}
                <li data-url="{{ path('pim_product_productfamily_edit', {'id': family.id}) }}">{{ family.name }}</li>
                {% endfor %}
            </ul>
        </div>
        <div id="form-tab" class="resizable-content">
            <h3>{{ title }}</h3>
        </div>
    </div>

    <script type="text/javascript">
        $(function() {
            $('.resizable-sidebar li').click(function(event) {
                $(this).siblings().removeClass('active');
                $(this).addClass('active');
                var url = $(this).data('url');
                $.get(url, null, function (data, status) {
                    if ('success' === status) {
                        $('#form-tab').html(data);
                    }
                });
            });
            $('#form-tab').on('click', '.group', function(event) {
                event.preventDefault();
                $(this).parent().find('tr:not(.group)').toggle();
                var icon = $(this).find('i');
                icon.toggleClass('icon-chevron-down').toggleClass('icon-chevron-up');
            });
        });
    </script>
{% endblock %}
