{% extends 'form_div_layout.html.twig' %}

{% block pim_wysiwyg_widget %}
    {{ block('textarea_widget') }}
    <script type="text/javascript">
        $('#{{ form.vars.id }}').wysihtml5({
            events: {
                change: function() {
                   $('#{{ form.vars.id }}').trigger('change');
                }
            }
        });
    </script>
{% endblock %}

{% block pim_translatable_field_row %}
    {{ form_errors(form) }}
    <table class="table table-condensed">
        <thead>
            <tr>
                {% for translation in form %}
                    <th>{{ form_label(translation) }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                {% for translation in form %}
                    <td>
                        {{ form_errors(translation) }}
                        {{ form_widget(translation) }}
                    </td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
{% endblock %}

{% block oro_media_row %}
    {% spaceless %}

    {{ form_errors(form) }}
    {{ form_row(form.file) }}

    {% if form.vars.value %}
    <div style="clear: both;">
        <ul class="unstyled">
            <li>
                <a href="{{ asset(form.vars.value.filePath) }}" rel="lightbox">{{ form.vars.value.originalFilename }}</a>
                {{ form_widget(form.removed, {attr: {style: 'margin: 4px;'}}) }} Remove
            </li>
        </ul>
    </div>
    {% endif %}

    {% endspaceless %}
{% endblock %}

{% block form_row %}
{% spaceless %}
{% if compound %}
    <div>
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% else %}
    <div class="control-group{% if errors|length > 0 %} error{%  endif %}{% if attr.class is defined %} {{ attr.class }}{% endif %}">
        {{ form_label(form, null, { label_attr: label_attr|merge({ class: 'control-label' })}) }}
        <div class="controls">
            {{ form_errors(form) }}
            {{ form_widget(form) }}
        </div>
    </div>
{% endif %}
{% endspaceless %}
{% endblock form_row %}

{% block widget_attributes %}
{% if attr.class is defined %}
    {% if attr.class != 'noswitch' %}
        {% set class = attr.class ~ ' input-large' %}
    {% else %}
        {% set class = attr.class %}
    {% endif %}
{% else %}
    {% set class = 'input-large' %}
{% endif %}
{% set attr = attr|merge({'class': class }) %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{% if disabled %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title'] %}{{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% else %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
{% endspaceless %}
{% endblock widget_attributes %}

{% block datetime_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        <div class="input-append picker-datetime">
            <input type="text"{% if attr['data-format'] is defined %} data-format="{{ attr['data-format'] }}"{% endif %}{% if value is not empty %} value="{{ value|date('d/m/Y H:i') }}"{% endif %}>
            <span class="add-on">
                <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
        </div>
        {% set type = 'hidden' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_errors(form.date) }}
            {{ form_errors(form.time) }}
            {{ form_widget(form.date) }}
            {{ form_widget(form.time) }}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock datetime_widget %}

{% block date_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        <div class="input-append picker-date">
            <input type="text"{% if attr['data-format'] is defined %} data-format="{{ attr['data-format'] }}"{% endif %}{% if value is not empty %} value="{{ value|date('d/m/Y') }}"{% endif %}>
            <span class="add-on">
                <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
        </div>
        {% set type = 'hidden' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ date_pattern|replace({
                '{{ year }}':  form_widget(form.year),
                '{{ month }}': form_widget(form.month),
                '{{ day }}':   form_widget(form.day),
            })|raw }}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock date_widget %}

{% block time_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        <div class="input-append picker-time">
            <input type="text"{% if attr['data-format'] is defined %} data-format="{{ attr['data-format'] }}"{% endif %}{% if value is not empty %} value="{{ value|date('H:i') }}"{% endif %}>
            <span class="add-on">
                <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
        </div>
        {% set type = 'hidden' %}
        {{ block('form_widget_simple') }}
    {% else %}
        {% set vars = widget == 'text' ? { 'attr': { 'size': 1 }} : {} %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_widget(form.hour, vars) }}:{{ form_widget(form.minute, vars) }}{% if with_seconds %}:{{ form_widget(form.second, vars) }}{% endif %}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock time_widget %}

{% block checkbox_widget %}
{% spaceless %}
    {% if attr.class is defined and attr.class == 'noswitch' %}
        <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
    {% else %}
        <div class="switch switch-small" data-on-label="{% if attr['data-on-label'] is defined %}{{ attr['data-on-label']|trans }}{% else %}{{ 'Yes'|trans }}{% endif %}" data-off-label="{% if attr['data-off-label'] is defined %}{{ attr['data-off-label']|trans }}{% else %}{{ 'No'|trans }}{% endif %}">
            {% if required %}{% set required = false %}{% endif %}
            <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
        </div>
    {% endif %}
{% endspaceless %}
{% endblock checkbox_widget %}

{% block oro_flexibleentity_metric_widget %}
{% spaceless %}
    {{ form_widget(form.unit) }}
    {{ form_widget(form.data) }}
{% endspaceless %}
{% endblock oro_flexibleentity_metric_widget %}

{% block pim_product_price_collection_widget %}
    {% for child in form.children %}
        {{ form_widget(child) }}
    {% endfor %}
{% endblock pim_product_price_collection_widget %}

{% block pim_product_price_widget %}
{% spaceless %}
    {{ form_widget(form.currency) }}
    {{ form_row(form.data, {label:currencySymbol(form.currency.vars.value)} ) }}
{% endspaceless %}
{% endblock pim_product_price_widget %}


