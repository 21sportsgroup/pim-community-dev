{% extends 'form_div_layout.html.twig' %}

{% block pim_wysiwyg_widget %}
    {{ block('textarea_widget') }}
    <script type="text/javascript">
        $('textarea#{{ form.vars.id }}').wysihtml5();
    </script>
{% endblock %}

{% block pim_translatable_field_row %}
    {{ form_errors(form) }}
    <table class="table table-condensed">
        <thead>
            <tr>
                {% for translation in form %}
                    <th>{{ form_label(translation) }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for translation in form %}
                <td>
                    {{ form_errors(translation) }}
                    {{ form_widget(translation) }}
                </td>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block oro_media_row %}
    {% spaceless %}

    {{ form_errors(form) }}

    <div class="fileupload fileupload-new" data-provides="fileupload">
        {{ form_label(form) }}
        {{ form_widget(form.id) }}
        <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;">
            <img src="http://www.placehold.it/50x50/EFEFEF/AAAAAA" />
        </div>
        <div class="fileupload-preview fileupload-exists thumbnail" style="width: 50px; height: 50px;"></div>
        <span class="btn btn-file">
            <span class="fileupload-new">{{ "Select file" | trans }}</span>
            <span class="fileupload-exists">{{ "Change file" | trans }}</span>
            {{ form_widget(form.file) }}
        </span>
        <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">{{ "Remove file" | trans }}</a>
        {% if form.vars.value %}
            <div style="display: inline-block; margin-left: 50px;">
                {{ form_row(form.remove) }}
            </div>
            <a href="{{ asset(form.vars.value.filePath) }}" rel="lightbox" class="btn"><i class="icon-eye-open"></i></a>
        {% endif %}
    </div>

    {% endspaceless %}
{% endblock %}

{% block form_row %}
{% spaceless %}
{% if compound %}
    <div>
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% else %}
    <div class="control-group{% if errors|length > 0 %} error{%  endif %}{% if attr.class is defined %} {{ attr.class }}{% endif %}">
        {{ form_label(form, null, { label_attr: label_attr|merge({ class: 'control-label' })}) }}
        <div class="controls">
            {{ form_errors(form) }}
            {{ form_widget(form) }}
        </div>
    </div>
{% endif %}
{% endspaceless %}
{% endblock form_row %}

{% block widget_attributes %}
{% if attr.class is defined %}
    {% set class = attr.class ~ ' span4' %}
{% else %}
    {% set class = 'span4' %}
{% endif %}
{% set attr = attr|merge({'class': class }) %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{% if disabled %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title'] %}{{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% else %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
{% endspaceless %}
{% endblock widget_attributes %}

{% block datetime_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        <div class="input-append picker-datetime">
            <input type="text"{% if attr['data-format'] is defined %} data-format="{{ attr['data-format'] }}"{% endif %}{% if value is not empty %} value="{{ value|date('d/m/Y H:i') }}"{% endif %}>
            <span class="add-on">
                <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
        </div>
        {% set type = 'hidden' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_errors(form.date) }}
            {{ form_errors(form.time) }}
            {{ form_widget(form.date) }}
            {{ form_widget(form.time) }}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock datetime_widget %}

{% block date_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        <div class="input-append picker-date">
            <input type="text"{% if attr['data-format'] is defined %} data-format="{{ attr['data-format'] }}"{% endif %}{% if value is not empty %} value="{{ value|date('d/m/Y') }}"{% endif %}>
            <span class="add-on">
                <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
        </div>
        {% set type = 'hidden' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ date_pattern|replace({
                '{{ year }}':  form_widget(form.year),
                '{{ month }}': form_widget(form.month),
                '{{ day }}':   form_widget(form.day),
            })|raw }}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock date_widget %}

{% block time_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        <div class="input-append picker-time">
            <input type="text"{% if attr['data-format'] is defined %} data-format="{{ attr['data-format'] }}"{% endif %}{% if value is not empty %} value="{{ value|date('H:i') }}"{% endif %}>
            <span class="add-on">
                <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
            </span>
        </div>
        {% set type = 'hidden' %}
        {{ block('form_widget_simple') }}
    {% else %}
        {% set vars = widget == 'text' ? { 'attr': { 'size': 1 }} : {} %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_widget(form.hour, vars) }}:{{ form_widget(form.minute, vars) }}{% if with_seconds %}:{{ form_widget(form.second, vars) }}{% endif %}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock time_widget %}

{% block checkbox_widget %}
{% spaceless %}
    <div class="switch switch-small" data-on-label="{% if attr['data-on-label'] is defined %}{{ attr['data-on-label']|trans }}{% else %}{{ 'Yes'|trans }}{% endif %}" data-off-label="{% if attr['data-off-label'] is defined %}{{ attr['data-off-label']|trans }}{% else %}{{ 'No'|trans }}{% endif %}">
        {% if required %}{% set required = false %}{% endif %}
        <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
    </div>
{% endspaceless %}
{% endblock checkbox_widget %}
