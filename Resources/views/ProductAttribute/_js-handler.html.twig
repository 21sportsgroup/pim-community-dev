<script type="text/javascript">
$(function() {

	$('#attribute-group-list li').on('click', function() {
        var datagrid = Oro.Registry.getElement('datagrid', 'attributes');
        datagrid.filters.group.value.value = $(this).data('id');
        datagrid.filters.group.trigger('update');
	});

	var addBtn = $('<a href="{{ path('pim_product_attributegroup_create') }}">')
		.html($('<i>', { class: 'icon-plus-sign' }));

	var editBtn = $('<button>').html($('<i>', { class: 'icon-edit' })).on('click', function() {
		var $selected = $('#attribute-group-list li.active').first();
		if ($selected.length < 1) {
			PimDialog.alert("{{ 'You must select an attribute group to edit.'|trans }}", "{{ 'Alert message'|trans }}");
		} else {
			if ($selected.data('id') == 0) {
				return;
			}
        	window.location = "{{ path('pim_product_attributegroup_edit') }}/" + $selected.data('id');
		}
	});

	var deleteBtn = $('<button>').html($('<i>', { class: 'icon-trash' })).on('click', function() {
		var $selected = $('#attribute-group-list').find('li.active').first();
		if ($selected.length < 1) {
			PimDialog.alert("{{ 'You must select an attribute group to delete.'|trans }}", "{{ 'Alert message'|trans }}");
		} else {
			if ($selected.data('id') == 0) {
				return;
			}
	        var doRemove = function() {
                var action = "{{ path('pim_product_attributegroup_remove', { 'id': 0 }) }}".replace(0, $selected.data('id'));
                var form = $('<form>').attr({ 'method': 'POST', 'action': action });
                var input = $('<input>', { type: 'hidden', name: '_method', value: 'DELETE' }).appendTo(form);
                var redirectBack = $('<input>', { type: 'hidden', name: '_redirectBack', value: '1' }).appendTo(form);
                form.submit();
	        }
            PimDialog.confirm(
                "{{ 'Are you sure you want to delete this attribute group?' | trans }}",
                "{{ 'Delete Confirmation' | trans }}",
                doRemove
            );
		}
	});

	$('#attribute-container').sidebarize({ buttons: [ addBtn, editBtn, deleteBtn ] });
});
</script>